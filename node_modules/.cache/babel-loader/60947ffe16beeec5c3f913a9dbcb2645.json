{"ast":null,"code":"var _jsxFileName = \"/mnt/d/Develop/SummerHack/truchigram/src/component-modal.js\";\nimport React from \"react\";\nimport M from \"materialize-css\";\nimport FileUpload from \"./component-fileUpload\";\nimport firebase from \"firebase/app\";\nimport \"firebase/database\";\nimport \"firebase/firebase-storage\";\n\nclass Modal extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      user: {\n        photoURL: \"\",\n        displayName: \"\"\n      }\n    };\n\n    this.handleChange = e => {\n      this.setState({\n        mensaje: e.target.value\n      });\n    };\n\n    this.handleUpload = e => {\n      e.preventDefault();\n      const record = {\n        avatar: this.state.user.photoURL,\n        nombre: this.state.user.displayName,\n        txt: this.state.txt,\n        pic: \"\"\n      };\n      const file = e.target.files[0];\n      const storageRef = firebase.storage().ref(`fotos/${file.name}`);\n      const task = storageRef.put(file);\n      task.on(\"state_changed\", snapshot => {\n        let porcentaje = snapshot.bytesTransferred / snapshot.totalBytes * 100;\n        this.setState({\n          uploadValue: porcentaje\n        });\n      }, error => {\n        console.log(error.message);\n      });\n      const db = firebase.database();\n      const dbRef = db.ref(\"pictures\");\n      const newPicture = dbRef.push();\n      newPicture.set(record);\n    };\n  }\n\n  componentDidMount() {\n    M.AutoInit();\n    firebase.auth().onAuthStateChanged(user => {\n      this.setState({\n        user\n      });\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(React.Fragment, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      href: \"#modal1\",\n      className: \"btn-floating btn-large waves-effect waves-light modal-trigger red FAB\",\n      id: \"fab\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"material-icons\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 11\n      }\n    }, \"add\")), /*#__PURE__*/React.createElement(\"div\", {\n      id: \"modal1\",\n      className: \"modal\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"modal-content\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"h4\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 13\n      }\n    }, \"Poste\\xE1 en Truchigram\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"chip\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: this.state.user.photoURL,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 15\n      }\n    }), this.state.user.displayName), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      className: \"col l12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-field col s9 l4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"material-icons prefix\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 21\n      }\n    }, \"mode_edit\"), /*#__PURE__*/React.createElement(\"textarea\", {\n      id: \"icon_prefix2\",\n      className: \"materialize-textarea\",\n      onChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"icon_prefix2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 21\n      }\n    }, \"Mensaje\"), /*#__PURE__*/React.createElement(FileUpload, {\n      onUpload: this.handleUpload,\n      uploadValue: this.state.uploadValue,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      onClick: this.handleUpload,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 21\n      }\n    }, \"Upload\")))))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"modal-footer\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 11\n      }\n    })));\n  }\n\n}\n\nexport default Modal;","map":{"version":3,"sources":["/mnt/d/Develop/SummerHack/truchigram/src/component-modal.js"],"names":["React","M","FileUpload","firebase","Modal","Component","state","user","photoURL","displayName","handleChange","e","setState","mensaje","target","value","handleUpload","preventDefault","record","avatar","nombre","txt","pic","file","files","storageRef","storage","ref","name","task","put","on","snapshot","porcentaje","bytesTransferred","totalBytes","uploadValue","error","console","log","message","db","database","dbRef","newPicture","push","set","componentDidMount","AutoInit","auth","onAuthStateChanged","render"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,CAAP,MAAc,iBAAd;AACA,OAAOC,UAAP,MAAuB,wBAAvB;AACA,OAAOC,QAAP,MAAqB,cAArB;AACA,OAAO,mBAAP;AACA,OAAO,2BAAP;;AAEA,MAAMC,KAAN,SAAoBJ,KAAK,CAACK,SAA1B,CAAoC;AAAA;AAAA;AAAA,SAClCC,KADkC,GAC1B;AACNC,MAAAA,IAAI,EAAE;AACJC,QAAAA,QAAQ,EAAE,EADN;AAEJC,QAAAA,WAAW,EAAE;AAFT;AADA,KAD0B;;AAAA,SAalCC,YAbkC,GAalBC,CAAD,IAAO;AACpB,WAAKC,QAAL,CAAc;AACZC,QAAAA,OAAO,EAAEF,CAAC,CAACG,MAAF,CAASC;AADN,OAAd;AAGD,KAjBiC;;AAAA,SAmBlCC,YAnBkC,GAmBlBL,CAAD,IAAO;AACpBA,MAAAA,CAAC,CAACM,cAAF;AACA,YAAMC,MAAM,GAAG;AACbC,QAAAA,MAAM,EAAE,KAAKb,KAAL,CAAWC,IAAX,CAAgBC,QADX;AAEbY,QAAAA,MAAM,EAAE,KAAKd,KAAL,CAAWC,IAAX,CAAgBE,WAFX;AAGbY,QAAAA,GAAG,EAAE,KAAKf,KAAL,CAAWe,GAHH;AAIbC,QAAAA,GAAG,EAAE;AAJQ,OAAf;AAOA,YAAMC,IAAI,GAAGZ,CAAC,CAACG,MAAF,CAASU,KAAT,CAAe,CAAf,CAAb;AACA,YAAMC,UAAU,GAAGtB,QAAQ,CAACuB,OAAT,GAAmBC,GAAnB,CAAwB,SAAQJ,IAAI,CAACK,IAAK,EAA1C,CAAnB;AACA,YAAMC,IAAI,GAAGJ,UAAU,CAACK,GAAX,CAAeP,IAAf,CAAb;AACAM,MAAAA,IAAI,CAACE,EAAL,CACE,eADF,EAEGC,QAAD,IAAc;AACZ,YAAIC,UAAU,GACXD,QAAQ,CAACE,gBAAT,GAA4BF,QAAQ,CAACG,UAAtC,GAAoD,GADtD;AAEA,aAAKvB,QAAL,CAAc;AACZwB,UAAAA,WAAW,EAAEH;AADD,SAAd;AAGD,OARH,EASGI,KAAD,IAAW;AACTC,QAAAA,OAAO,CAACC,GAAR,CAAYF,KAAK,CAACG,OAAlB;AACD,OAXH;AAcA,YAAMC,EAAE,GAAGtC,QAAQ,CAACuC,QAAT,EAAX;AACA,YAAMC,KAAK,GAAGF,EAAE,CAACd,GAAH,CAAO,UAAP,CAAd;AACA,YAAMiB,UAAU,GAAGD,KAAK,CAACE,IAAN,EAAnB;AACAD,MAAAA,UAAU,CAACE,GAAX,CAAe5B,MAAf;AACD,KAjDiC;AAAA;;AAOlC6B,EAAAA,iBAAiB,GAAG;AAClB9C,IAAAA,CAAC,CAAC+C,QAAF;AACA7C,IAAAA,QAAQ,CAAC8C,IAAT,GAAgBC,kBAAhB,CAAoC3C,IAAD,IAAU;AAC3C,WAAKK,QAAL,CAAc;AAAEL,QAAAA;AAAF,OAAd;AACD,KAFD;AAGD;;AAsCD4C,EAAAA,MAAM,GAAG;AACP,wBACE,oBAAC,KAAD,CAAO,QAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AACE,MAAA,IAAI,EAAC,SADP;AAEE,MAAA,SAAS,EAAC,uEAFZ;AAGE,MAAA,EAAE,EAAC,KAHL;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAKE;AAAG,MAAA,SAAS,EAAC,gBAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aALF,CADF,eASE;AAAK,MAAA,EAAE,EAAC,QAAR;AAAiB,MAAA,SAAS,EAAC,OAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,SAAS,EAAC,eAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iCADF,eAEE;AAAK,MAAA,SAAS,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,GAAG,EAAE,KAAK7C,KAAL,CAAWC,IAAX,CAAgBC,QAA1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,EAEG,KAAKF,KAAL,CAAWC,IAAX,CAAgBE,WAFnB,CAFF,eAOE;AAAK,MAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAM,MAAA,SAAS,EAAC,SAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,SAAS,EAAC,uBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAG,MAAA,SAAS,EAAC,uBAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBADF,eAEE;AACE,MAAA,EAAE,EAAC,cADL;AAEE,MAAA,SAAS,EAAC,sBAFZ;AAGE,MAAA,QAAQ,EAAE,KAAKC,YAHjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFF,eAOE;AAAO,MAAA,OAAO,EAAC,cAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAPF,eAQE,oBAAC,UAAD;AACE,MAAA,QAAQ,EAAE,KAAKM,YADjB;AAEE,MAAA,WAAW,EAAE,KAAKV,KAAL,CAAW8B,WAF1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MARF,eAaE;AAAQ,MAAA,OAAO,EAAE,KAAKpB,YAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAbF,CADF,CADF,CADF,CAPF,CADF,eA8BE;AAAK,MAAA,SAAS,EAAC,cAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MA9BF,CATF,CADF;AA4CD;;AA/FiC;;AAkGpC,eAAeZ,KAAf","sourcesContent":["import React from \"react\";\nimport M from \"materialize-css\";\nimport FileUpload from \"./component-fileUpload\";\nimport firebase from \"firebase/app\";\nimport \"firebase/database\";\nimport \"firebase/firebase-storage\";\n\nclass Modal extends React.Component {\n  state = {\n    user: {\n      photoURL: \"\",\n      displayName: \"\",\n    },\n  };\n  componentDidMount() {\n    M.AutoInit();\n    firebase.auth().onAuthStateChanged((user) => {\n      this.setState({ user });\n    });\n  }\n  handleChange = (e) => {\n    this.setState({\n      mensaje: e.target.value,\n    });\n  };\n\n  handleUpload = (e) => {\n    e.preventDefault();\n    const record = {\n      avatar: this.state.user.photoURL,\n      nombre: this.state.user.displayName,\n      txt: this.state.txt,\n      pic: \"\",\n    };\n\n    const file = e.target.files[0];\n    const storageRef = firebase.storage().ref(`fotos/${file.name}`);\n    const task = storageRef.put(file);\n    task.on(\n      \"state_changed\",\n      (snapshot) => {\n        let porcentaje =\n          (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\n        this.setState({\n          uploadValue: porcentaje,\n        });\n      },\n      (error) => {\n        console.log(error.message);\n      }\n    );\n\n    const db = firebase.database();\n    const dbRef = db.ref(\"pictures\");\n    const newPicture = dbRef.push();\n    newPicture.set(record);\n  };\n  render() {\n    return (\n      <React.Fragment>\n        <a\n          href=\"#modal1\"\n          className=\"btn-floating btn-large waves-effect waves-light modal-trigger red FAB\"\n          id=\"fab\"\n        >\n          <i className=\"material-icons\">add</i>\n        </a>\n\n        <div id=\"modal1\" className=\"modal\">\n          <div className=\"modal-content\">\n            <h4>Posteá en Truchigram</h4>\n            <div className=\"chip\">\n              <img src={this.state.user.photoURL} />\n              {this.state.user.displayName}\n            </div>\n\n            <div className=\"row\">\n              <form className=\"col l12\">\n                <div className=\"row\">\n                  <div className=\"input-field col s9 l4\">\n                    <i className=\"material-icons prefix\">mode_edit</i>\n                    <textarea\n                      id=\"icon_prefix2\"\n                      className=\"materialize-textarea\"\n                      onChange={this.handleChange}\n                    />\n                    <label htmlFor=\"icon_prefix2\">Mensaje</label>\n                    <FileUpload\n                      onUpload={this.handleUpload}\n                      uploadValue={this.state.uploadValue}\n                    />\n\n                    <button onClick={this.handleUpload}>Upload</button>\n                  </div>\n                </div>\n              </form>\n            </div>\n          </div>\n          <div className=\"modal-footer\" />\n        </div>\n      </React.Fragment>\n    );\n  }\n}\n\nexport default Modal;\n"]},"metadata":{},"sourceType":"module"}